<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>Сурагчийн Login</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-database.js";

// Firebase тохиргоо
const firebaseConfig = {
  apiKey: "AIzaSyAmxVtMKNhljn1ITsoNRPvpYudivEFRyJw",
  authDomain: "mathmotivation-95bfd.firebaseapp.com",
  databaseURL: "https://mathmotivation-95bfd-default-rtdb.firebaseio.com/",
  projectId: "mathmotivation-95bfd",
  storageBucket: "mathmotivation-95bfd.appspot.com",
  messagingSenderId: "727534124610",
  appId: "1:727534124610:web:32f4b7ef3d646ea49f77db"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

function studentLogin() {
  const code = document.getElementById('studentCode').value.trim();
  if(!code) return alert('Код оруулна уу');

  const now = new Date();
  const timeString = now.getHours().toString().padStart(2,'0') + ':' +
                     now.getMinutes().toString().padStart(2,'0');

  set(ref(db, 'attendanceData/' + code), timeString)
    .then(()=> alert('Амжилттай нэвтэрлээ!'))
    .catch(err => alert('Алдаа гарлаа: ' + err));
}

window.studentLogin = studentLogin;
</script>
</head>
<body>
  <h2>Сурагчийн нэвтрэлт</h2>
  <input type="text" id="studentCode" placeholder="Сурагчийн код">
  <button onclick="studentLogin()">Нэвтрэх</button>
</body>
</html>
