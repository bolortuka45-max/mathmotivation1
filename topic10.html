<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <title>–¢—ç–≥—à –±–∞ —Å–æ–Ω–¥–≥–æ–π —Ñ—É–Ω–∫—Ü</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #f9f9f9, #e0e0e0);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }

    .container {
      background: #fff;
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      max-width: 600px;
      width: 90%;
      text-align: center;
    }

    h1 {
      color: #333;
    }

    p {
      font-weight: bold;
      color: #444;
    }

    textarea {
      width: 90%;
      height: 100px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      margin-top: 10px;
      font-size: 14px;
      resize: vertical;
    }

    button {
      margin-top: 15px;
      padding: 12px 25px;
      font-size: 16px;
      cursor: pointer;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 10px;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background: #45a049;
      transform: translateY(-2px);
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 16px;
      color: #2c3e50;
    }

    .self-evaluation {
      margin-top: 25px;
      text-align: left;
    }

    .self-evaluation label {
      display: block;
      margin: 5px 0;
      font-weight: normal;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–¢—ç–≥—à –±–∞ —Å–æ–Ω–¥–≥–æ–π —Ñ—É–Ω–∫—Ü</h1>
    <p>–î–∞–∞–ª–≥–∞–≤—Ä—É—É–¥ —ç–Ω–¥ –æ—Ä—É—É–ª–Ω–∞</p>
    <textarea id="answer" placeholder="–≠–Ω–¥ —Ö–∞—Ä–∏—É–ª—Ç–∞–∞ –±–∏—á–Ω—ç “Ø“Ø..."></textarea><br>
    <button onclick="checkAnswer()">–ò–ª–≥—ç—ç—Ö</button>
    <p id="result"></p>

    <!-- ”®”©—Ä–∏–π–Ω –æ–π–ª–≥–æ–ª—Ç—ã–≥ “Ø–Ω—ç–ª—ç—Ö —Ö—ç—Å—ç–≥ -->
    <div class="self-evaluation">
      <h3>üìù ”®–Ω”©”©–¥—Ä–∏–π–Ω —Ö–∏—á—ç—ç–ª–∏–π–Ω –æ–π–ª–≥–æ–ª—Ç–æ–æ “Ø–Ω—ç–ª–Ω—ç “Ø“Ø</h3>
      <label><input type="radio" name="understanding" value="–ú–∞—à —Å–∞–π–Ω"> –ú–∞—à —Å–∞–π–Ω</label>
      <label><input type="radio" name="understanding" value="–°–∞–π–Ω"> –°–∞–π–Ω</label>
      <label><input type="radio" name="understanding" value="–î—É–Ω–¥"> –î—É–Ω–¥</label>
      <label><input type="radio" name="understanding" value="–°–∞–π–∂—Ä—É—É–ª–∞—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π"> –°–∞–π–∂—Ä—É—É–ª–∞—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π</label>
    </div>
  </div>

  <script>
    function checkAnswer(){
      const name = localStorage.getItem('studentName') || '–ù—ç—Ä–≥“Ø–π';
      const studentCode = localStorage.getItem('studentCode') || '0000';
      const answer = document.getElementById('answer').value.trim();

      if(answer === ""){
        document.getElementById('result').textContent = "–•–∞—Ä–∏—É–ª—Ç –æ—Ä—É—É–ª–Ω–∞ —É—É.";
        return;
      }

      // ===== –ñ–∏—à—ç—ç –∑”©–≤ —Ö–∞—Ä–∏—É–ª—Ç =====
      const correctAnswer = "—Ç—ç–≥—à"; // –¢–∞ —Ö“Ø—Å—Å—ç–Ω “Ø–Ω—ç–ª–≥—ç—ç–Ω–∏–π –ª–æ–≥–∏–∫—ã–≥ ”©”©—Ä—á–∏–ª–∂ –±–æ–ª–Ω–æ
      let score = (answer.toLowerCase() === correctAnswer) ? 100 : 0;

      // ===== Self-evaluation (“Ø–Ω—ç–ª–≥—ç—ç) =====
      const radios = document.getElementsByName('understanding');
      let evaluation = '';
      for(const radio of radios){
        if(radio.checked){
          evaluation = radio.value;
          break;
        }
      }

      if(!evaluation){
        document.getElementById('result').textContent = "”®–Ω”©”©–¥—Ä–∏–π–Ω –æ–π–ª–≥–æ–ª—Ç–æ–æ “Ø–Ω—ç–ª–Ω—ç “Ø“Ø!";
        return;
      }

      // ===== LocalStorage-–¥ —Ö–∞–¥–≥–∞–ª–∞—Ö =====
      let scoresData = JSON.parse(localStorage.getItem('scoresData')) || {};
      scoresData[studentCode] = { score: score, selfEval: evaluation };
      localStorage.setItem('scoresData', JSON.stringify(scoresData));

      // ===== “Æ—Ä –¥“Ø–Ω–≥ —Ö–∞—Ä—É—É–ª–∞—Ö =====
      document.getElementById('result').textContent = 
        `${name}, —Ç–∞–Ω—ã —Ö–∞—Ä–∏—É–ª—Ç –±–æ–ª–æ–Ω “Ø–Ω—ç–ª–≥—ç—ç –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç. (–û–Ω–æ–æ: ${score}%, ”®”©—Ä–∏–π–Ω “Ø–Ω—ç–ª–≥—ç—ç: ${evaluation})`;

      // ===== –ë–∞–≥—à–∏–π–Ω —Å–∞–º–±–∞—Ä—Ç —Ö–∞—Ä–∞–≥–¥–∞—Ö –ª–æ–≥–∏–∫ =====
      if(window.updateDashboard){
        updateDashboard(); // –•—ç—Ä—ç–≤ –±–∞–≥—à–∏–π–Ω —Å–∞–º–±–∞—Ä –∞—à–∏–≥–ª–∞–∂ –±–∞–π–≥–∞–∞ –±–æ–ª —ç–Ω—ç —Ñ—É–Ω–∫—Ü –Ω—å —à–∏–Ω—ç—á–∏–ª–Ω—ç
      }
    }
  </script>
</body>
</html>
